---
version: "2.1"
services:
  nextcloud:
    container_name: onlyoffice
    image: onlyoffice/documentserver:latest
    networks:
      proxy:
        ipv4_address: 172.24.0.11
    volumes:
      - '{{ config_directory }}/onlyoffice/logs:/var/log/onlyoffice'
      - '{{ config_directory }}/onlyoffice/data:/var/www/onlyoffice/Data'
      - '{{ config_directory }}/onlyoffice/rabbitmq:/var/lib/rabbitmq'
      - '{{ config_directory }}/onlyoffice/redis:/var/lib/redis'
      - '{{ config_directory }}/onlyoffice/onlyoffice:/var/lib/onlyoffice'
      - '{{ config_directory }}/onlyoffice/postgresql:/var/lib/postgresql'
      - '{{ config_directory }}/onlyoffice/truetype:/usr/share/fonts/truetype/custom'
    ports:
      - 83:80
    restart: unless-stopped

networks:
  proxy:
    external: true